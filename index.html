<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>فصل أولى سابع</title>
<style>
:root{
  --primary:#6a11cb;
  --primary-dark:#2575fc;
  --accent:#ffd873;
  --me-bg:#e8f0ff;
  --other-bg:#fff6ea;
}
*{box-sizing:border-box;margin:0;padding:0}
body{
  font-family:Arial, sans-serif;
  background:linear-gradient(120deg,var(--primary),var(--primary-dark));
  min-height:100vh;
  color:#222;
  display:flex;
  flex-direction:column;
  align-items:center;
  padding-bottom:80px;
}
.card{
  background:rgba(255,255,255,0.96);
  width:92%;
  max-width:980px;
  border-radius:12px;
  box-shadow:0 8px 30px rgba(0,0,0,0.2);
  padding:18px;
  margin:18px 0;
}
#registerArea{max-width:420px}
label{display:block;margin:6px 0;font-weight:bold}
input, select, button{width:100%;padding:10px;border-radius:8px;border:1px solid #bbb;font-size:15px}
button{background:var(--primary);color:#fff;border:none;cursor:pointer;font-weight:bold}
button:hover{background:var(--primary-dark)}
.small-link{text-align:center;margin-top:8px;color:var(--primary-dark);cursor:pointer;text-decoration:underline}
#msg{color:#b00020;font-weight:bold;text-align:center;margin-top:8px}
#dashboard{display:none}
.dashboard-top{display:flex;gap:12px;align-items:center;justify-content:space-between;flex-wrap:wrap}
.profile{
  display:flex;gap:12px;align-items:center;
}
.avatar{
  width:56px;height:56px;border-radius:50%;background:#ddd;display:inline-flex;align-items:center;justify-content:center;font-weight:bold;color:#444;
  overflow:hidden;border:2px solid rgba(0,0,0,0.06)
}
.grid{
  display:grid;
  grid-template-columns:1fr 360px;
  gap:18px;
  margin-top:16px;
}
.chat-box{display:flex;flex-direction:column;height:420px}
#chatWindow{flex:1;padding:12px;border-radius:8px;background:#fafafa;border:1px solid #eee;overflow:auto}
.chat-row{display:flex;margin:8px 0;max-width:85%;}
.chat-row.me{margin-left:auto;justify-content:flex-end}
.bubble{
  padding:10px 12px;border-radius:12px;box-shadow:0 2px 6px rgba(0,0,0,0.06);font-size:14px;word-break:break-word;
}
.bubble.me{background:var(--me-bg);align-self:flex-end;border-top-right-radius:4px}
.bubble.other{background:var(--other-bg);align-self:flex-start;border-top-left-radius:4px}
.meta{font-size:12px;color:#666;margin-top:6px}
.typing-indicator{font-size:12px;color:#555;font-style:italic;margin:4px 0}
.chat-controls{display:flex;gap:8px;margin-top:10px}
.chat-controls input{flex:1}
.students-list{max-height:420px;overflow:auto;padding:6px}
.student-item{display:flex;align-items:center;gap:8px;padding:8px;border-bottom:1px solid #f0f0f0}
.student-item .name{font-weight:bold}
table{width:100%;border-collapse:collapse}
th,td{border:1px solid #e6e6e6;padding:8px;text-align:center}
footer{position:fixed;bottom:0;left:0;right:0;padding:10px 18px;background:rgba(0,0,0,0.35);color:#fff;display:flex;justify-content:space-between;font-weight:bold}
@media(max-width:880px){.grid{grid-template-columns:1fr}}
</style>
</head>
<body>

<div class="card" id="registerArea">
  <h2 style="text-align:center;margin:6px 0">تسجيل حساب جديد</h2>
  <label for="name">الاسم</label>
  <input id="name" placeholder="الاسم">
  <label for="surname">اللقب</label>
  <input id="surname" placeholder="اللقب">
  <label for="password">كلمة المرور</label>
  <input id="password" type="password" placeholder="8 أحرف على الأقل + رمز">
  <div style="display:flex;gap:8px;margin-top:10px">
    <button id="actionBtn">تسجيل حساب جديد</button>
  </div>
  <div id="msg"></div>
  <div class="small-link" id="toggleLink">تسجيل دخول</div>
</div>

<div id="dashboard" class="card">
  <div class="dashboard-top">
    <div class="profile">
      <div class="avatar" id="myAvatar">ص</div>
      <div>
        <div id="welcome" style="font-weight:bold"></div>
      </div>
    </div>
    <div style="text-align:right">
      <div style="font-size:14px;color:#333;font-weight:bold">لوحة الفصل</div>
      <div style="font-size:13px;color:#555">شات الطلاب، قائمة الطلاب، وجدول الحصص</div>
    </div>
  </div>
  <div class="grid">
    <div>
      <div class="chat-box card" style="padding:14px">
        <h3 style="margin:0 0 8px 0">شات الطلاب</h3>
        <div id="chatWindow" style="background:#fff;padding:10px;border-radius:8px;border:1px solid #eee;height:300px;overflow:auto"></div>
        <div class="typing-indicator" id="typingIndicator"></div>
        <div class="chat-controls">
          <input id="chatInput" placeholder="اكتب رسالة..." />
          <button id="sendBtn">إرسال</button>
        </div>
      </div>
      <div class="card" style="margin-top:12px">
        <h3 style="margin:0 0 8px 0">جدول الفصل</h3>
        <table>
          <thead><tr><th>اليوم</th><th>المادة</th></tr></thead>
          <tbody id="scheduleBody">
            <tr><td>السبت</td><td>رياضيات</td></tr>
            <tr><td>الأحد</td><td>لغة عربية</td></tr>
            <tr><td>الاثنين</td><td>علوم</td></tr>
            <tr><td>الثلاثاء</td><td>تاريخ</td></tr>
            <tr><td>الأربعاء</td><td>لغة إنجليزية</td></tr>
          </tbody>
        </table>
      </div>
    </div>
    <div>
      <div class="card">
        <h3 style="margin:0 0 8px 0">قائمة طلاب الفصل</h3>
        <div class="students-list" id="studentsList"></div>
      </div>
    </div>
  </div>
</div>

<footer>
  <span>الجروب الرسمي لفصل 1/7 أولى سابع</span>
  <span>تم إنشاؤه بواسطة ياسين محمد</span>
</footer>

<script>
const nameEl=document.getElementById('name');
const surnameEl=document.getElementById('surname');
const passwordEl=document.getElementById('password');
const actionBtn=document.getElementById('actionBtn');
const msgEl=document.getElementById('msg');
const toggleLink=document.getElementById('toggleLink');
const registerArea=document.getElementById('registerArea');
const dashboard=document.getElementById('dashboard');
const chatWindow=document.getElementById('chatWindow');
const chatInput=document.getElementById('chatInput');
const sendBtn=document.getElementById('sendBtn');
const studentsListDiv=document.getElementById('studentsList');
const myAvatar=document.getElementById('myAvatar');
const welcome=document.getElementById('welcome');
const typingIndicator=document.getElementById('typingIndicator');

let mode='register';
let currentUser=null;
let messages=[]; 
let students=[];

toggleLink.addEventListener('click', ()=>{
  if(mode==='register'){
    mode='login'; actionBtn.textContent='تسجيل الدخول'; toggleLink.textContent='إنشاء حساب جديد'; document.querySelector('#registerArea h2').textContent='تسجيل دخول';
  } else {
    mode='register'; actionBtn.textContent='تسجيل حساب جديد'; toggleLink.textContent='تسجيل دخول'; document.querySelector('#registerArea h2').textContent='تسجيل حساب جديد';
  }
  msgEl.textContent='';
});

function showMsg(txt,color='#b00020'){ msgEl.textContent=txt; msgEl.style.color=color; }

actionBtn.addEventListener('click', ()=>{
  const name=nameEl.value.trim();
  const surname=surnameEl.value.trim();
  const password=passwordEl.value;
  if(!name){ showMsg('اكتب الاسم'); return; }
  if(!surname){ showMsg('اكتب اللقب'); return; }
  if(!password || password.length<8){ showMsg('كلمة المرور 8 أحرف على الأقل'); return; }
  if(mode==='register'){
    currentUser={name,surname}; students.push(currentUser); showMsg('تم التسجيل!', '#0a7b00'); enterDashboard();
  } else {
    const user=students.find(s=>s.name===name && s.surname===surname);
    if(!user){ showMsg('الحساب غير موجود'); return; }
    currentUser=user; showMsg('تم تسجيل الدخول!', '#0a7b00'); enterDashboard();
  }
});

function enterDashboard(){
  registerArea.style.display='none';
  dashboard.style.display='block';
  welcome.textContent=`مرحباً، ${currentUser.name} ${currentUser.surname}`;
  myAvatar.textContent=currentUser.name[0];
  loadStudents();
}

function loadStudents(){
  studentsListDiv.innerHTML='';
  students.forEach(s=>{
    const el=document.createElement('div'); el.className='student-item';
    el.innerHTML=`<div style="display:flex;align-items:center;gap:10px">
      <div class="avatar" style="width:44px;height:44px">${s.name[0]}</div>
      <div><div class="name">${s.name} ${s.surname}</div></div></div>`;
    studentsListDiv.appendChild(el);
  });
}

sendBtn.addEventListener('click', sendMessage);
chatInput.addEventListener('keydown', e=>{ if(e.key==='Enter') sendMessage(); else sendTyping(); });

function sendTyping(){
  typingIndicator.textContent=`${currentUser.name} يكتب...`;
  clearTimeout(typingTimeout);
  typingTimeout=setTimeout(()=>typingIndicator.textContent='',1000);
}

function sendMessage(){
  const text=chatInput.value.trim(); if(!text) return;
  messages.push({name:currentUser.name,surname:currentUser.surname,message:text,time:new Date()});
  chatInput.value='';
  renderMessages();
}

function renderMessages(){
  chatWindow.innerHTML='';
  messages.forEach(msg=>{
    const row=document.createElement('div');
    const isMe=msg.name===currentUser.name && msg.surname===currentUser.surname;
    row.className='chat-row '+(isMe?'me':'other');
    const bubble=document.createElement('div'); bubble.className='bubble '+(isMe?'me':'other'); bubble.textContent=msg.message;
    const meta=document.createElement('div'); meta.className='meta'; meta.textContent=`${msg.name} ${msg.surname} • ${msg.time.toLocaleTimeString()}`;
    row.appendChild(bubble); row.appendChild(meta); chatWindow.appendChild(row);
  });
  chatWindow.scrollTop=chatWindow.scrollHeight;
}
</script>
</body>
</html>
